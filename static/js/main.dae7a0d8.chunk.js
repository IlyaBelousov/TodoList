(this["webpackJsonptodolist-ts"]=this["webpackJsonptodolist-ts"]||[]).push([[0],{160:function(e,t,a){e.exports=a(197)},165:function(e,t,a){},166:function(e,t,a){},197:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),r=a(42),o=a.n(r);a(165),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(166);var c=a(302),l=a(303),s=a(298),u=a(304),d=a(300),m=a(305),f=a(301),E=a(279),b=a(27),g=a(267),p=a(287),T=a(282),O=a(21),h={status:"idle",error:null},j=function(e){return{type:"APP/SET-STATUS",status:e}},C=function(e){return{type:"APP/SET-ERROR",error:e}},v=i.a.forwardRef((function(e,t){return i.a.createElement(T.a,Object.assign({elevation:6,ref:t,variant:"filled"},e))}));function y(){var e=Object(b.c)((function(e){return e.app.error})),t=Object(b.b)(),a=function(e,a){"clickaway"!==a&&t(C(null))};return i.a.createElement(g.a,{spacing:2,sx:{width:"100%"}},i.a.createElement(p.a,{open:!!e,autoHideDuration:4e3,onClose:a},i.a.createElement(v,{onClose:a,severity:"error",sx:{width:"100%"}},e)))}var k,S,I=a(24),L=a(294),D=a(290),A=a(269),w=a(307),R=a(281),N=a(286),x=a(308),H=a(289),P=a(138),F=a(66),K=a.n(F),G=K.a.create({baseURL:"https://social-network.samuraijs.com/api/1.1/",withCredentials:!0,headers:{"API-KEY":"d60dcf74-681a-4412-9b6b-cffe62026499"}}),z=function(){return G.get("auth/me")},U=function(e){return G.post("/auth/login",e)},M=function(){return G.delete("/auth/login")},B={isLoggedIn:!1},V=function(e){return{type:"login/SET-IS-LOGGED-IN",isLoggedIn:e}},Y=function(){var e=Object(b.c)((function(e){return e.auth.isLoggedIn})),t=Object(b.b)();Object(n.useEffect)((function(){t((function(e){z().then((function(t){0===t.data.resultCode&&e(V(!0))}))}))}),[]);var a=Object(P.a)({initialValues:{email:"",password:"",rememberMe:!1},onSubmit:function(e){var a;t((a=e,function(e){e(j("loading")),U(a).then((function(t){0===t.data.resultCode?(e(V(!0)),e(j("succeeded"))):e(C(t.data.messages[0]))}))}))}});return e?i.a.createElement(I.a,{to:"/Todolist"}):i.a.createElement(L.a,{container:!0,justifyContent:"center"},i.a.createElement(L.a,{item:!0,xs:4,justifyContent:"center"},i.a.createElement("h1",{style:{display:"flex",justifyContent:"center"}},"Login"),i.a.createElement("form",{style:{display:"flex",justifyContent:"center"},onSubmit:a.handleSubmit},i.a.createElement(D.a,null,i.a.createElement(A.a,null,i.a.createElement("p",null,"To log in get registered",i.a.createElement("a",{href:"https://social-network.samuraijs.com/",target:"_blank"}," here")),i.a.createElement("p",null,"or use common test account credentials:"),i.a.createElement("p",null,"Email: free@samuraijs.com"),i.a.createElement("p",null,"Password: free")),i.a.createElement(w.a,null,i.a.createElement(R.a,{label:"Email",margin:"normal",name:"email",onChange:a.handleChange,value:a.values.email}),i.a.createElement(R.a,{type:"password",label:"Password",margin:"normal",name:"password",onChange:a.handleChange,value:a.values.password}),i.a.createElement(H.a,{label:"Remember me",control:i.a.createElement(N.a,{onChange:a.handleChange,checked:a.values.rememberMe,name:"rememberMe"})}),i.a.createElement(x.a,{type:"submit",variant:"outlined",color:"primary"},"Login"))))))},W=a(18),J=K.a.create({baseURL:"https://social-network.samuraijs.com/api/1.1/todo-lists/",withCredentials:!0,headers:{"API-KEY":"d60dcf74-681a-4412-9b6b-cffe62026499"}}),q=function(){return J.get("")},$=function(e){return J.post("",{title:e})},_=function(e){return J.delete("".concat(e))},Q=function(e,t){return J.put("".concat(e),{title:t})},X=[],Z=function(e,t){return{type:"SET-ENTITY-STATUS",todoListId:e,entityStatus:t}},ee=a(293),te=a(296),ae=a(11),ne=a(280),ie=a(276),re=i.a.memo((function(e){console.log("add form");var t=Object(n.useState)(""),a=Object(ae.a)(t,2),r=a[0],o=a[1],c=Object(n.useState)(!1),l=Object(ae.a)(c,2),u=l[0],d=l[1],m=function(){var t=r.trim();t?(e.callBack(t),o("")):d(!0)},f=function(){d(!1)};return i.a.createElement("div",null,i.a.createElement(ne.a,{disabled:"loading"===e.entityStatus,size:"small",onBlur:f,variant:e.variant?e.variant:"outlined",value:r,onChange:function(e){d(!1),o(e.currentTarget.value)},onKeyPress:function(e){"Enter"===e.key&&(d(!1),m())},label:"Title",error:u,helperText:u&&"Title is required"}),i.a.createElement(s.a,{disabled:"loading"===e.entityStatus,style:{margin:"1"},size:"medium",onBlur:f,color:"primary",onClick:m},i.a.createElement(ie.a,{fontSize:"medium"})))})),oe=i.a.memo((function(e){console.log("Editaple span");var t=Object(n.useState)(!1),a=Object(ae.a)(t,2),r=a[0],o=a[1],c=Object(n.useState)(e.title),l=Object(ae.a)(c,2),s=l[0],u=l[1];return r?i.a.createElement(ne.a,{autoFocus:!0,onBlur:function(){e.ChangeTitle(s),o(!1)},value:s,onChange:function(e){u(e.currentTarget.value)},onKeyPress:function(t){"Enter"===t.key&&(e.ChangeTitle(s),o(!1))}}):i.a.createElement("span",{onDoubleClick:function(){return o(!0)}},e.title)})),ce=a(297),le=a(299),se=a(277);!function(e){e[e.New=0]="New",e[e.InProgress=1]="InProgress",e[e.Completed=2]="Completed",e[e.Draft=3]="Draft"}(k||(k={})),function(e){e[e.Low=0]="Low",e[e.Middle=1]="Middle",e[e.Hi=2]="Hi",e[e.Urgently=3]="Urgently",e[e.Later=4]="Later"}(S||(S={}));var ue=K.a.create({baseURL:"https://social-network.samuraijs.com/api/1.1/todo-lists/",withCredentials:!0,headers:{"API-KEY":"d60dcf74-681a-4412-9b6b-cffe62026499"}}),de=function(e){return ue.get("".concat(e,"/tasks"))},me=function(e,t){return ue.post("".concat(e,"/tasks"),{title:t})},fe=function(e,t){return ue.delete("".concat(e,"/tasks/").concat(t))},Ee=function(e,t,a){return ue.put("".concat(e,"/tasks/").concat(t),a)},be=function(e,t,a){return ue.put("".concat(e,"/tasks/").concat(t),a)},ge=a(4),pe={},Te=a(288),Oe=a(284),he=i.a.memo((function(e){console.log("Task");return i.a.createElement(Te.a,{divider:!0,alignItems:"center",key:e.task.id},i.a.createElement("span",{className:e.task.completed?"isActive":""},i.a.createElement(Oe.a,{size:"small",color:"primary",onChange:function(t){e.ChangeTaskStatus(e.task.id,t.currentTarget.checked?k.Completed:k.New,e.id)},checked:e.task.status===k.Completed}),i.a.createElement(oe,{ChangeTitle:function(t){e.ChangeTaskTitle(e.id,e.task.id,t)},title:e.task.title})),i.a.createElement(s.a,{color:"secondary",onClick:function(){e.removeTasks(e.task.id,e.id)}},i.a.createElement(se.a,{style:{fontSize:20,margin:10}})))})),je=i.a.memo((function(e){console.log("todolist");var t=Object(b.c)((function(t){return t.tasks[e.id]})),a=Object(b.b)();Object(n.useEffect)((function(){var t;a((t=e.id,function(e){e(j("loading")),de(t).then((function(a){e(function(e,t){return{type:"FETCH-TASKS",todolistId:e,tasks:t}}(t,a.data.items)),e(j("idle"))}))}))}),[]);var r=Object(n.useCallback)((function(t){e.ChangeTodolistTitle(e.id,t)}),[e.ChangeTodolistTitle,e.id]),o=Object(n.useCallback)((function(){e.changeFilter(e.id,"ALL")}),[e.changeFilter,e.id]),c=Object(n.useCallback)((function(){e.changeFilter(e.id,"Active")}),[e.changeFilter,e.id]),l=Object(n.useCallback)((function(){e.changeFilter(e.id,"Completed")}),[e.changeFilter,e.id]),u=Object(n.useCallback)((function(){e.removeTodoList(e.id)}),[e.removeTodoList,e.id]),m=Object(n.useCallback)((function(e,t,n){a(function(e,t,a){return function(n,i){n(j("loading"));var r=i().tasks[e].find((function(e){return e.id===t}));if(r){var o={completed:r.completed,addedDate:r.addedDate,deadline:r.deadline,description:r.description,order:r.order,priority:r.priority,startDate:r.startDate,status:r.status,title:a};n(j("loading")),Ee(e,t,o).then((function(i){n(function(e,t,a){return{type:"CHANGE-TASK-TITLE",taskID:e,todolistID:t,title:a}}(t,e,a)),n(j("idle"))}))}}}(e,t,n))}),[a]),f=Object(n.useCallback)((function(e,t){var n,i;a((n=t,i=e,function(e){e(j("loading")),fe(n,i).then((function(t){0===t.data.resultCode&&(e({type:"REMOVE-TASK",taskID:i,todolistID:n}),e(j("idle")))}))}))}),[a]),E=Object(n.useCallback)((function(e,t,n){a(function(e,t,a){return function(n,i){var r=i().tasks[e].find((function(e){return e.id===t}));if(r){var o={completed:r.completed,addedDate:r.addedDate,deadline:r.deadline,description:r.description,order:r.order,priority:r.priority,startDate:r.startDate,status:a,title:r.title};n(j("loading")),be(e,t,o).then((function(i){n(function(e,t,a){return{type:"CHANGE-TASK-STATUS",taskID:e,status:t,todolistID:a}}(t,a,e)),console.log(i.data.data),n(j("idle"))}))}}}(n,e,t))}),[a]),g=t;return"Active"===e.filter&&(g=g.filter((function(e){return e.status===k.New}))),"Completed"===e.filter&&(g=g.filter((function(e){return e.status===k.Completed}))),i.a.createElement("div",{className:"todoListContainer"},i.a.createElement("h3",{style:{display:"flex",alignItems:"center",justifyContent:"center"}},i.a.createElement(oe,{ChangeTitle:r,title:e.title}),i.a.createElement(s.a,{disabled:"loading"===e.entityStatus,size:"small",onClick:u},i.a.createElement(se.a,{style:{fontSize:25,margin:10}}))),i.a.createElement(re,{entityStatus:e.entityStatus,variant:"standard",callBack:function(t){e.addTask(t,e.id)}}),i.a.createElement(ce.a,{dense:!0},g&&g.map((function(t){return i.a.createElement(he,{key:t.id,ChangeTaskTitle:m,ChangeTaskStatus:E,removeTasks:f,id:e.id,task:t})}))),i.a.createElement(le.a,{style:{display:"flex",justifyContent:"space-between"}},i.a.createElement(d.a,{variant:"ALL"===e.filter?"contained":"outlined",size:"small",color:"primary",onClick:o},"ALL"),i.a.createElement(d.a,{size:"small",color:"primary",variant:"Active"===e.filter?"contained":"outlined",onClick:c},"Active"),i.a.createElement(d.a,{size:"small",color:"primary",variant:"Completed"===e.filter?"contained":"outlined",onClick:l},"Completed")))})),Ce=function(){var e=Object(b.c)((function(e){return e.todoLists})),t=Object(b.c)((function(e){return e.auth.isLoggedIn})),a=Object(b.b)();Object(n.useEffect)((function(){a((function(e){e(j("loading")),q().then((function(t){return e({type:"FETCH-TODOLISTS",todoLists:t.data})})),e(j("idle"))}))}),[]);var r=Object(n.useCallback)((function(e){var t;a((t=e,function(e){e(Z(t,"loading")),e(j("loading")),_(t).then((function(a){0===a.data.resultCode&&(e({type:"REMOVE-TODOLIST",id:t}),e(j("idle")),e(Z(t,"idle")))}))}))}),[a]),o=Object(n.useCallback)((function(e,t){a(function(e,t){return{type:"CHANGE-FILTER",id:e,filterValue:t}}(e,t))}),[a]),c=Object(n.useCallback)((function(e,t){a(function(e,t){return function(a){a(j("loading")),Q(e,t).then((function(n){0===n.data.resultCode?(a({type:"CHANGE-TODOLIST-TITLE",id:e,title:t}),a(j("idle"))):(a(C(n.data.messages[0])),a(j("failed")))}))}}(e,t))}),[a]),l=Object(n.useCallback)((function(e,t){a(function(e,t){return function(a){a(j("loading")),me(e,t).then((function(e){var t,n,i;0===e.data.resultCode?(a((t=e.data.data.item.title,n=e.data.data.item.todoListId,i=e.data.data.item.id,{type:"ADD-TASK",taskTitle:t,todolistID:n,taskId:i})),a(j("idle"))):(e.data.messages&&(a(C(e.data.messages[0])),a(j("failed"))),a(C("Some error occurred")),a(j("failed")))}))}}(t,e))}),[a]),s=Object(n.useCallback)((function(e){var t;a((t=e,function(e){e(j("loading")),$(t).then((function(t){if(0!==t.data.resultCode)e(C(t.data.messages[0])),e(j("failed"));else{var a=t.data.data.item,n=a.id,i=a.addedDate,r=a.order,o=a.title;e(function(e,t,a,n){return{type:"CREATE-TODOLIST",payload:{id:e,addedDate:a,order:n,title:t}}}(n,o,i,r)),e(j("idle"))}}))}))}),[a]);return t?i.a.createElement(i.a.Fragment,null,i.a.createElement(ee.a,{container:!0,justifyContent:"center"},i.a.createElement(re,{callBack:s})),i.a.createElement(f.a,{maxWidth:"lg"},i.a.createElement(ee.a,{container:!0,spacing:5},e.map((function(e){return i.a.createElement(ee.a,{item:!0,key:e.id},i.a.createElement(te.a,{elevation:3,style:{paddingTop:"0",margin:"15px",padding:"10px",boxSizing:"border-box"}},i.a.createElement(je,{entityStatus:e.entityStatus,id:e.id,title:e.title,addTask:l,changeFilter:o,filter:e.filter,removeTodoList:r,ChangeTodolistTitle:c})))}))))):i.a.createElement(I.a,{to:"/Todolist/login"})},ve=i.a.memo((function(){console.log("app");var e=Object(b.c)((function(e){return e.app.status})),t=Object(b.c)((function(e){return e.auth.isLoggedIn})),a=Object(b.b)(),r=Object(n.useCallback)((function(){if(!t)return i.a.createElement(I.a,{to:"/Todolist/login"});a((function(e){e(j("loading")),M().then((function(t){0===t.data.resultCode?(e(V(!1)),e(j("succeeded"))):e(C(t.data.messages[0]))}))}))}),[t]);return i.a.createElement("div",{className:"App"},i.a.createElement(c.a,{style:{marginBottom:"10px"},position:"static"},i.a.createElement(l.a,{style:{justifyContent:"space-between"}},i.a.createElement(s.a,{"aria-label":"menu",color:"inherit",edge:"start"},i.a.createElement(E.a,null)),i.a.createElement(u.a,{variant:"h6"},"Todolists"),t&&i.a.createElement(d.a,{onClick:r,color:"inherit"},"LogOut")),"loading"===e&&i.a.createElement(m.a,null)),i.a.createElement(f.a,{fixed:!0},i.a.createElement(I.d,null,i.a.createElement(I.b,{exact:!0,path:"/Todolist",render:function(){return i.a.createElement(Ce,null)}}),i.a.createElement(I.b,{path:"/Todolist/login",render:function(){return i.a.createElement(Y,null)}}))),i.a.createElement(y,null))})),ye=a(95),ke=a(137),Se=Object(ye.b)({todoLists:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:X,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET-ENTITY-STATUS":return e.map((function(e){return e.id===t.todoListId?Object(O.a)(Object(O.a)({},e),{},{entityStatus:t.entityStatus}):e}));case"REMOVE-TODOLIST":return e.filter((function(e){return e.id!==t.id}));case"CHANGE-FILTER":var a=e.find((function(e){return e.id===t.id}));return a?(a.filter=t.filterValue,Object(W.a)(e)):e;case"CREATE-TODOLIST":return[Object(O.a)(Object(O.a)({},t.payload),{},{filter:"ALL",entityStatus:"idle"})].concat(Object(W.a)(e));case"CHANGE-TODOLIST-TITLE":return e.map((function(e){return e.id===t.id?Object(O.a)(Object(O.a)({},e),{},{title:t.title}):e}));case"FETCH-TODOLISTS":return t.todoLists.map((function(e){return Object(O.a)(Object(O.a)({},e),{},{filter:"ALL",entityStatus:"idle"})}));default:return e}},tasks:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"REMOVE-TASK":var a=Object(O.a)({},e);return a[t.todolistID]=a[t.todolistID].filter((function(e){return e.id!==t.taskID})),a;case"ADD-TASK":var n=Object(O.a)({},e),i={id:t.taskId,title:t.taskTitle,addedDate:"",completed:!1,deadline:"",description:"",order:0,priority:S.Hi,startDate:"",status:k.New,todoListId:t.todolistID},r=n[t.todolistID];return n[t.todolistID]=[i].concat(Object(W.a)(r)),n;case"FETCH-TASKS":return Object(O.a)(Object(O.a)({},e),{},Object(ge.a)({},t.todolistId,t.tasks));case"CHANGE-TASK-STATUS":return Object(O.a)(Object(O.a)({},e),{},Object(ge.a)({},t.todolistID,Object(W.a)(e[t.todolistID].map((function(e){return e.id===t.taskID?Object(O.a)(Object(O.a)({},e),{},{status:t.status}):e})))));case"CHANGE-TASK-TITLE":return Object(O.a)(Object(O.a)({},e),{},Object(ge.a)({},t.todolistID,e[t.todolistID].map((function(e){return e.id===t.taskID?Object(O.a)(Object(O.a)({},e),{},{title:t.title}):e}))));case"CREATE-TODOLIST":return Object(O.a)(Object(ge.a)({},t.payload.id,[]),e);case"REMOVE-TODOLIST":var o=Object(O.a)({},e);return delete o[t.id],o;case"FETCH-TODOLISTS":var c=Object(O.a)({},e);return t.todoLists.forEach((function(e){c[e.id]=[]})),c;default:return e}},app:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"APP/SET-STATUS":return Object(O.a)(Object(O.a)({},e),{},{status:t.status});case"APP/SET-ERROR":return Object(O.a)(Object(O.a)({},e),{},{error:t.error});default:return e}},auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"login/SET-IS-LOGGED-IN":return Object(O.a)(Object(O.a)({},e),{},{isLoggedIn:t.isLoggedIn});default:return e}}}),Ie=Object(ye.c)(Se,Object(ye.a)(ke.a));window.store=Ie;var Le=a(75);o.a.render(i.a.createElement(Le.a,null,i.a.createElement(b.a,{store:Ie},i.a.createElement(ve,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[160,1,2]]]);
//# sourceMappingURL=main.dae7a0d8.chunk.js.map